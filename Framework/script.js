/*!
  * portfolio v1.0.0 (https://github.com/WPBC/portfolio.git)
  * Copyright (c) 2021 Wesley Campbell (https://wesleycampbell.co.uk)
  * Licensed under ISC
  */
const header=document.getElementById("header"),toggles=document.querySelectorAll(".toggle"),nav=document.querySelector("#nav"),anchors=document.querySelectorAll("#homepage #nav ul a"),sections=document.querySelectorAll("section[id]"),headerHeight=72;function toggleHandler(e){e.preventDefault(),nav.classList.toggle("open"),anchors.forEach((e=>e.addEventListener("click",(()=>nav.classList.remove("open")))))}toggles.forEach((e=>e.addEventListener("click",toggleHandler)));const printError=(e,t)=>{document.getElementById(e).innerHTML=t},validateForm=()=>{const e=document.contactForm.name,t=document.contactForm.email,r=document.contactForm.phone,o=document.contactForm.subject,n=document.contactForm.message;var a=!0;for(const e of document.getElementsByClassName("form-info"))e.innerHTML="";e.value?!1===/^[a-zA-Z\s]+$/.test(e.value)?(printError("name-info","Please enter a valid name."),a=!1,e.classList.add("form-error")):e.classList.remove("form-error"):(printError("name-info","Please enter your name."),a=!1,e.classList.add("form-error"));t.value?!1===/^\S+@\S+\.\S+$/.test(t.value)?(printError("email-info","Please enter a valid email address."),a=!1,t.classList.add("form-error")):t.classList.remove("form-error"):(printError("email-info","Please enter your email address."),a=!1,t.classList.add("form-error"));const s=r.value.replace(/ /g,"");return s?s&&!1===/^[0-9]{9,11}$/g.test(s)?(printError("phone-info","Please enter a valid phone number."),a=!1,r.classList.add("form-error")):r.classList.remove("form-error"):(printError("phone-info","Please enter your phone number."),a=!1,r.classList.add("form-error")),o.value?o.classList.remove("form-error"):(printError("subject-info","Please select a subject."),a=!1,o.classList.add("form-error")),n.value?n.classList.remove("form-error"):(printError("message-info","Please enter a message."),a=!1,n.classList.add("form-error")),a};function clickHandler(e){e.preventDefault(),anchors.forEach((e=>e.classList.remove("active"))),this.classList.add("active");const t=this.getAttribute("href"),r=document.querySelector(t).offsetTop-72;window.scrollTo({top:r,behavior:"smooth"})}$("#contact-form").submit((function(e){e.preventDefault(),validateForm()&&$.ajax({url:"contact.php",type:"post",data:$("#contact-form").serialize(),dataType:"json",success:function(e){var t=e.error,r=e.success;""!==t?($("#alert").removeClass("d-none"),$("#alert").addClass("notice-failed").html(t)):($("#alert").removeClass("d-none"),$("#alert").addClass("notice-success").html(r),$("#submit-button").remove())},error:function(e,t,r){var o=e.responseText;$("#alert").removeClass("d-none"),$("#alert").addClass("notice-failed").html(o)}})})),anchors.forEach((e=>e.addEventListener("click",clickHandler)));const navHighlighter=()=>{let e=window.pageYOffset;sections.forEach((t=>{const r=t.offsetHeight,o=t.offsetTop-72-2,n=t.getAttribute("id");e>o&&e<=o+r?document.querySelector(".primary-nav a[href*="+n+"]").classList.add("active"):document.querySelector(".primary-nav a[href*="+n+"]").classList.remove("active")}))},topButton=document.getElementById("top");topButton.addEventListener("click",(()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0})),window.onscroll=()=>{document.body.scrollTop>100||document.documentElement.scrollTop>100?header.classList.add("fixed"):header.classList.remove("fixed"),document.body.scrollTop>50||document.documentElement.scrollTop>50?$("#top").fadeIn(500):$("#top").fadeOut(500)};const month=(new Date).getMonth();if(11===month){const e=document.querySelector(".banner");e.classList.add("banner-xmas");const t=document.createElement("canvas");t.id="snow",e.appendChild(t);const r=document.createElement("div");r.classList.add("snow-blanket"),e.appendChild(r);const o=document.createElement("img");o.src="./assets/svg/reindeer.svg",o.alt="Rudolf the red nose reindeer image",o.classList.add("reindeer-svg");const n=document.querySelector(".banner .btn");n.classList.add("btn-reindeer"),n.appendChild(o);const a=150,s=3,c=30,l="#ffffffde";window.onload=function(){var e=document.getElementById("snow"),t=e.getContext("2d"),r=window.innerWidth,o=window.innerHeight/2;e.width=r,e.height=o;for(var n=a,d=[],i=0;i<n;i++)d.push({x:Math.random()*r,y:Math.random()*o,r:Math.random()*s,d:Math.random()+1});var m=0;setInterval((function(){t.clearRect(0,0,r,o),t.fillStyle=l,t.beginPath();for(var e=0;e<n;e++){var a=d[e];t.moveTo(a.x,a.y),t.arc(a.x,a.y,a.r,0,2*Math.PI,!0)}t.fill(),(function(){m+=.015;for(var e=0;e<n;e++){var t=d[e];t.y+=Math.pow(t.d,2)+1,t.x+=1.5*Math.sin(m),t.y>o&&(d[e]={x:Math.random()*r,y:0,r:t.r,d:t.d})}})()}),c)}}